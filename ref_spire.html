

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>API Documentation &mdash; Spire.io.py 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Spire.io.py 0.1 documentation" href="index.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="Tutorial" href="tutorial.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Spire.io.py 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-spire.core">
<span id="api-documentation"></span><h1>API Documentation<a class="headerlink" href="#module-spire.core" title="Permalink to this headline">¶</a></h1>
<p>Spire.io client core.</p>
<dl class="class">
<dt id="spire.core.Client">
<em class="property">class </em><tt class="descclassname">spire.core.</tt><tt class="descname">Client</tt><big>(</big><em>self</em>, <em>base_url='http://api.spire.io'</em>, <em>key=None</em>, <em>async=True</em><big>)</big><a class="reference internal" href="_modules/spire/core.html#Client"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spire.core.Client" title="Permalink to this definition">¶</a></dt>
<dd><p>The Client class provides an entry point into all Spire.io
services. Currently certain kinds of API usage require directly
instantiating Channel and Subscription objects, but that will change soon
with the addition of helper methods on Client.</p>
<p>Client also holds essential info for API use like the discovery URL, API
key, and description resource (which contains information like
content-types and urls for each available resource).</p>
<p>If you have <cite>libevent</cite> and <cite>gevent</cite> installed on your system, Client can be
initialized in async mode:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s">&#39;supersecret&#39;</span><span class="p">,</span> <span class="n">async</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that this will change the API of e.g. Channel.publish and
Channel.subscribe to require a callback instead of blocking and returning
results.</p>
</dd></dl>

<dl class="class">
<dt id="spire.core.Channel">
<em class="property">class </em><tt class="descclassname">spire.core.</tt><tt class="descname">Channel</tt><big>(</big><em>client</em>, <em>session</em>, <em>channel_resource</em><big>)</big><a class="reference internal" href="_modules/spire/core.html#Channel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spire.core.Channel" title="Permalink to this definition">¶</a></dt>
<dd><p>The Channel class is initialized with client, session, and a channel
resource. The channel resource is the json.loads() version of the resource
fetched from spire, something like
<cite>dict(url=&#8217;http://api.spire.io/foo&#8217;, capability=&#8217;bar&#8217;)</cite>.</p>
<p>The class holds a convenience method, <cite>subscribe()</cite>, that instantiates a
Subscription class. You shouldn&#8217;t need to instantiate Subscription directly
in most cases, instead using the method on Channel and (soon) methods on
Client.</p>
<dl class="method">
<dt id="spire.core.Channel.subscribe">
<tt class="descname">subscribe</tt><big>(</big><em>self</em>, <em>name=None</em>, <em>last_message_timestamp=None</em>, <em>callback=None</em><big>)</big><a class="reference internal" href="_modules/spire/core.html#Channel.subscribe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spire.core.Channel.subscribe" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the primary means of receiving and processing methods. Calling
without passing the callback param will wait, blocking, until a message
becomes available:</p>
<p>With an async client, passing a callback will immediately return True
and execute the callback when messages are available. Callbacks take a
single argument, formatted like the <cite>messages</cite> array above</p>
<p>This method is a proxy for Subscription&#8217;s <cite>subscribe()</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="spire.core.Channel.delete">
<tt class="descname">delete</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/spire/core.html#Channel.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spire.core.Channel.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete this channel.</p>
</dd></dl>

<dl class="method">
<dt id="spire.core.Channel.publish">
<tt class="descname">publish</tt><big>(</big><em>message</em><big>)</big><a class="reference internal" href="_modules/spire/core.html#Channel.publish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spire.core.Channel.publish" title="Permalink to this definition">¶</a></dt>
<dd><p>Publish a message to this channel.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="spire.core.SpireClientException">
<em class="property">exception </em><tt class="descclassname">spire.core.</tt><tt class="descname">SpireClientException</tt><a class="reference internal" href="_modules/spire/core.html#SpireClientException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spire.core.SpireClientException" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for spire client exceptions</p>
</dd></dl>

<dl class="class">
<dt id="spire.core.Session">
<em class="property">class </em><tt class="descclassname">spire.core.</tt><tt class="descname">Session</tt><big>(</big><em>client</em>, <em>session_resource</em><big>)</big><a class="reference internal" href="_modules/spire/core.html#Session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spire.core.Session" title="Permalink to this definition">¶</a></dt>
<dd><p>Class representation of the API&#8217;s Session resource. Used to create / access
just about any Spire.io resource.</p>
<p>Initialized with instance of <cite>Client</cite> so we have access to schema and
resource URLs. You shouldn&#8217;t need to instantiate this directly, instead
use <cite>Client.session()</cite>.</p>
<dl class="method">
<dt id="spire.core.Session.channel">
<tt class="descname">channel</tt><big>(</big><em>name=None</em>, <em>description=None</em><big>)</big><a class="reference internal" href="_modules/spire/core.html#Session.channel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spire.core.Session.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Channel object, takes an optional name and description.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="spire.core.Subscription">
<em class="property">class </em><tt class="descclassname">spire.core.</tt><tt class="descname">Subscription</tt><big>(</big><em>client</em>, <em>subscription_resource</em><big>)</big><a class="reference internal" href="_modules/spire/core.html#Subscription"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spire.core.Subscription" title="Permalink to this definition">¶</a></dt>
<dd><p>You shouldn&#8217;t need to instantiate this object directly in most cases,
instead using the helper methods on Channel and (soon) Client.</p>
<dl class="method">
<dt id="spire.core.Subscription.subscribe">
<tt class="descname">subscribe</tt><big>(</big><em>last_message_timestamp=None</em>, <em>callback=None</em><big>)</big><a class="reference internal" href="_modules/spire/core.html#Subscription.subscribe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spire.core.Subscription.subscribe" title="Permalink to this definition">¶</a></dt>
<dd><p>See documentation for <cite>Channel.subscribe()</cite></p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial.html"
                        title="previous chapter">Tutorial</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="changelog.html"
                        title="next chapter">Changelog</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/ref_spire.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             >previous</a> |</li>
        <li><a href="index.html">Spire.io.py 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Daniel Hengeveld.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>